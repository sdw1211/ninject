# 3장 함수가 핵심이다.

- 자바스크립트는 함수형 언어라는 것을 이해하는 것이 중요!!!!
- 자바스크립트에서 함수는 1종 객체라는 것이 중요

## 함수형 언어는 무엇이 다른가?

- 함수가 실행의 기본 모듈 단위
- 페이지에서 작동하도록 만들어진 모든 스크립트는 함수 안에서 실행될 것
- 1종 객체로서의 함수(first-class function)
  - 특징
    - 리터럴로 생성될 수 있다.
    - 변수, 배열 엘리먼트, 다른 객체의 프로퍼티에 할당될 수 있다.
    - 함수의 인자로 전달될 수 있다.
    - 함수의 결과 값으로 반환될 수 있다.
    - 동적으로 생성된 프로퍼티를 가질 수 있다.
- 브라우저 이벤트 루프
  - GUI 프로그램 개발 과정
    - 사용자 인터페이스를 설정한다.
    - 이벤트가 발생하기를 기다리는 루프에 진입한다.
    - 발생한 이벤트에 대한 핸들러(리스터라고도 하는)를 호출한다.
  - 브라우저 이벤트들도 위와 같은 과정을 거친다.
  - 브라우저가 이벤트를 처리하고 이벤트 핸들러 함수를 호출하는 과정은 `비동기`방이라 말할 수 있다.
  - 브라우저에서 발생하는 이벤트
    - 브라우저 이벤트. 페이지 로드 완료, 페이지 언로드 등등
    - 네트워크 이벤트. Ajax 요청에 대한 응답 이벤트 등
    - 사용자 이벤트. 마우스 클릭, 마우스 움직임 또는 키 눌림 등
    - 타이머 이벤트. 시간 제한이 만료되거나 주기적으로 발생하는 이벤트 등
  - 브라우저 이벤트 루프는 단일 스레드에서 동작
  - 그렇기 때문에 이벤트 큐에 들어온 순서대로 업무 처리
  - 코드를 미리 만들어 두고 나중에 실행한다는 개념은 페이지에서 작동하는 자바스크립트의 핵심
  - 이벤트를 큐에 넣는 작업은 이벤트를 처리하는 스레드와 별개로 동작한다.
- 콜백 개념
  - 브러우저가 나중에 그 함수를 호출하거나 다른 코드가 그 함수를 호출하면 그 함수를 콜백이라고 부른다.
  - 표현식을 사용할 수 있는 곳이라면 어디에서든 함수를 만들 수 있다는 것
  - 어떤 함수를 그 함수가 사용되는 곳 근처에 선언하고 불필요한 함수 이름을 제거함으로써 코드를 보다 짧고 이해하기 쉽도록 할 수 있다.

## 함수 선언

- 자바스크립트 함수는 함수 리터럴을 사용하여 정의
- 함수는 값으로 사용될 수 있다.
- 함수 리터럴 구성
  - function 키워드
  - 함수 이름(생략 가능)
  - 쉼표로 구본된 매개변수 목록, 그 매개변수 목록을 둘러싸고 있는 괄호
  - 함수 본문, 중괄호로 둘러싸여 있는 일련의 자바스크립트 구문
- 모든 함수에는 `name`라는 프로퍼티가 있는데, 이 프로퍼티의 값은 함수 이름에 대한 문자열, 이름 없는 함수의 경우는 빈 문자열이 될 것이다.
- 함수를 선언했을 떄, 해당 함수를 사용할 수 있는 유효 범위는 어디까지인가 한번 씩 고민해볼 수 있는 습관을 가지도록 하자.
- 유효 범위와 함수
  - 함수를 선언할 때, 그 함수가 속한 유효 범위와 그 함수 자체가 ++만들어 내는++ 유효 범위가 그 함수 내의 선언들에 어떤 영향을 주는지 신경 써서 선언
  - 자바스크립트의 유효 범위는 {} 단위가 아니다.!!!!
  - 자바스크립트의 유효 범위는 **함수**에 의해 결정
  ```javascript
  if (window) {
    var x = 213;
  }
  alert(x);		//여기서 x 값은 undefined가 아니고 213
  ```
  - 변수는 함수 내에서 변수가 선언된 부분부터 함수 끝부분까지 유효함.
  - 블록이 중첩되어 있더라도 변수 유효 범위에 영향을 주지는 않는다.
  - 이름을 가진 함수는 그 함수가 선언된 함수 내부 전체에서 유효(hosting 메커니즘)
  - 함수는 그들의 유효 범위에서 미리 참조될 수 있지만, 변수는 그렇지 않다.

## 호출

- this 매개변수가 어떻게 설정되는지를 결정
- 함수를 호출하는 방법
  - 함수로 호출
  - 메서드로 호출
  - 생성자로 호출
  - 함수의 apply() 나 call() 메서드를 통해 호출
- 인자(arguement)에서 함수의 매개변수(parameter)까지
  - 함수를 호출할 때 인자 목록을 제공하면, 이 인자들은 함수를 정의할 떄 지정한 매개변수에 각 매개변수의 순서대로 할당
  - 매개변수보다 많은 인자가 제공되었다면, ++남은++ 인자들은 매개변수에 할당되지 않는다.
  ```javascript
    function whatever(a,b,c) {}   // a,b,c를 매개변수
    whatever(1,2,3,4,5,6,7,8);   // 1,2,3,4,5,6,7,8 을 인자
    /*
    위 경우는 a=1, b=2, c=3을 할당한다.
    남은 4,5,6,7,8은 매개변수가 제공되지 않기 때문에 따로 할당이 되지 않는다.
    */
  ```
  - 인자보다 매개변수가 많은 경우, 인자와 부합되지 않는 매개변수는 undefined로 설정
  ```javascript
    function whatever(a,b,c) {}   // a,b,c를 매개변수
    whatever(1,2);   // a=1, b=2, c=undefined 로 할당
  ```
  - 모든 함수 호출에는 암묵적으로 arguments와 this 두 매개변수가 넘어온다.
  - arguments 매개변수
    - 함수에 전달된 모든 인자들을 담고 있는 컬렉션
    - 인자 개수를 나타내는 length 프로퍼티를 가지고 있다.
    - 배열 인덱스 표기법을 사용하여 개별 인자 값을 얻을 수 있다.
    ```javascript
    whatever(1,2,3,4,5); //agruments[0] === 1, agruments[1] === 2
    ```
    - 배열이 아니라는 점이 중요!!!!
  - this 매개변수
    - 함수 호출과 관계된 객체를 참조하며, 이를 '함수 콘텍스트'라 한다.
    - 함수를 어떻게 **++호출++**할 것인가와 관련
- 함수로 호출
  - 메서드, 생성자 또는 apply()나 call()을 통해 함수를 호출하지 않는 모든 호출 방법을 통칭
  ```javascript
  function ninja();
  ninja();			//함수로 호출
  var samurai = function() {};
  samurai();		//함수로 호출
  ```
  - this 는 전역 콘텍스트(window 객체)를 나타낸다.
- 메서드로 호출
  ```javascript
  var o = {};
  o.whatever = function() {};
  o.whatever();	//메서드로 호출
  ```
  - 여기서 this는 메서드를 가지고 있는 객체
  - 자바스크립트로 객체 지향 코드를 작성하는데 결정적인 역할을 함
  - 메서드를 소유하고 있는 객체를 참조하기 위해 어떤 메서드 내에서든 this를 사용할 수 있는 것을 뜻함.
  - `어떻게 호출하냐`에 따라 각 호출에 대한 함ㅅ후 콘텍스트가 변한다는 것을 유념
- 생성자로 호출
  ```javascript
  function creep() {return this;}
  new creep(); //생성자로 호출
  ```
  - 생성자가 호출되면 발생하는 특별한 행동
    - 비어있는 객체가 새로 생성
    - 새로 생성된 객체는 this 매개변수로 생성자 함수에 전달되고, 따라서 생성자의 함수 콘텍스트가 된다.
    - 어떤 명시적인 반환 값이 없다면, 새로 생성된 객체가 생성자의 값으로 반환
- 생성자를 작성할 때 고려해야 할 것들
  - 